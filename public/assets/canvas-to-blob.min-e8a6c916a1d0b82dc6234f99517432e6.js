!function(e){"use strict";var t=window.MozBlobBuilder||window.WebKitBlobBuilder||window.BlobBuilder,n=/^image\/(jpeg|png)$/,o=function(e,i,r){if(r=r||{},e.toBlob)return e.toBlob(i,r.type),!0;if(e.mozGetAsFile){var a=r.name;return i(e.mozGetAsFile(n.test(r.type)&&a||(a&&a.replace(/\..+$/,"")||"blob")+".png",r.type)),!0}return e.toDataURL&&t&&window.atob&&window.ArrayBuffer&&window.Uint8Array?(i(o.dataURItoBlob(e.toDataURL(r.type))),!0):!1};o.dataURItoBlob=function(e){var n,o,i,r,a,l;for(n=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):decodeURIComponent(e.split(",")[1]),o=new ArrayBuffer(n.length),i=new Uint8Array(o),r=0;r<n.length;r+=1)i[r]=n.charCodeAt(r);return a=new t,a.append(o),l=e.split(",")[0].split(":")[1].split(";")[0],a.getBlob(l)},"undefined"!=typeof define&&define.amd?define(function(){return o}):e.canvasToBlob=o}(this);